"use strict";(self.webpackChunkTripBuddy=self.webpackChunkTripBuddy||[]).push([[106],{2106:(Q,m,a)=>{a.r(m),a.d(m,{AuthModule:()=>Y});var d=a(6895),l=a(7251),i=a(4006),e=a(4650),g=a(7070);function c(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Email is required"),e.qZA())}function f(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Invalid email format"),e.qZA())}function p(o,r){if(1&o&&(e.TgZ(0,"div",11),e.YNc(1,c,2,0,"small",12),e.YNc(2,f,2,0,"small",12),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.email)}}function u(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1," password is required "),e.qZA())}function _(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1," Please enter a valid password "),e.qZA())}function h(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Password must be at least 6 characters"),e.qZA())}function x(o,r){if(1&o&&(e.TgZ(0,"div",11),e.YNc(1,u,2,0,"small",12),e.YNc(2,_,2,0,"small",12),e.YNc(3,h,2,0,"small",12),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.f.password.errors?null:n.f.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.f.password.errors?null:n.f.password.errors.password),e.xp6(1),e.Q6J("ngIf",null==n.f.password.errors?null:n.f.password.errors.minlength)}}function v(o,r){if(1&o&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Oqu(n.errorMessage)}}function b(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Name is required"),e.qZA())}function w(o,r){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,b,2,0,"small",14),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.f.name.errors?null:n.f.name.errors.required)}}function M(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Email is required"),e.qZA())}function P(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Invalid email format"),e.qZA())}function O(o,r){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,M,2,0,"small",14),e.YNc(2,P,2,0,"small",14),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.email)}}function Z(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Password is required"),e.qZA())}function T(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1," Password must be at least 6 characters "),e.qZA())}function q(o,r){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,Z,2,0,"small",14),e.YNc(2,T,2,0,"small",14),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.f.password.errors?null:n.f.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.f.password.errors?null:n.f.password.errors.minlength)}}function I(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Confirm password is required"),e.qZA())}function A(o,r){1&o&&(e.TgZ(0,"small"),e._uU(1,"Passwords do not match"),e.qZA())}function y(o,r){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,I,2,0,"small",14),e.YNc(2,A,2,0,"small",14),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.f.confirmPassword.errors?null:n.f.confirmPassword.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.f.confirmPassword.errors?null:n.f.confirmPassword.errors.mismatch)}}function J(o,r){if(1&o&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Oqu(n.errorMessage)}}const N=[{path:"login",component:(()=>{class o{constructor(n,t,s){this.fb=n,this.authService=t,this.router=s,this.submitted=!1,this.errorMessage=""}ngOnInit(){this.loginForm=this.fb.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(6)]]})}get f(){return this.loginForm.controls}onSubmit(){this.submitted=!0,this.errorMessage="",!this.loginForm.invalid&&this.authService.login(this.loginForm.value).subscribe({next:n=>{console.log("Login successful",n),this.router.navigate(["/dashboard"])},error:n=>{this.errorMessage=n.error?.message||"Login failed"}})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(i.qu),e.Y36(g.e),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:15,vars:8,consts:[[1,"modal-backdrop"],[1,"modal-container"],[1,"modal-left"],["src","assets/images/sydney-opera-house.png","alt","Opera House"],[1,"modal-right"],[3,"formGroup","ngSubmit"],["type","email","formControlName","email","placeholder","Email"],["class","error",4,"ngIf"],["type","password","formControlName","password","placeholder","Password"],["type","submit",1,"submit-btn"],["class","error-message",4,"ngIf"],[1,"error"],[4,"ngIf"],[1,"error-message"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"h2"),e._uU(6,"Log In"),e.qZA(),e.TgZ(7,"form",5),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e._UZ(8,"input",6),e.YNc(9,p,3,2,"div",7),e._UZ(10,"input",8),e.YNc(11,x,4,3,"div",7),e.TgZ(12,"button",9),e._uU(13,"Log In"),e.qZA(),e.YNc(14,v,2,1,"div",10),e.qZA()()()()),2&n&&(e.xp6(7),e.Q6J("formGroup",t.loginForm),e.xp6(1),e.ekj("invalid",t.f.email.touched&&t.f.email.invalid),e.xp6(1),e.Q6J("ngIf",t.f.email.touched&&t.f.email.invalid),e.xp6(1),e.ekj("invalid",t.f.password.touched&&t.f.password.invalid),e.xp6(1),e.Q6J("ngIf",t.f.password.touched&&t.f.password.invalid),e.xp6(3),e.Q6J("ngIf",t.errorMessage))},dependencies:[d.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(240,240,240,.7);display:flex;justify-content:center;align-items:center;z-index:1000}.modal-container[_ngcontent-%COMP%]{display:flex;width:720px;height:400px;background:white;border-radius:12px;box-shadow:0 8px 24px #0003;overflow:hidden}.modal-left[_ngcontent-%COMP%]{flex:1}.modal-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.modal-right[_ngcontent-%COMP%]{flex:1;padding:48px 32px;position:relative}.modal-right[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:32px;font-weight:700;text-align:center}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:16px;padding:12px;border:1px solid #8c8cec;border-radius:4px;font-size:14px;outline:none}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#d9534f}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d9534f;font-size:12px;margin-bottom:12px}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background-color:#6c63ff;border:none;color:#fff;padding:14px 0;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .2s ease-in-out}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background-color:#594fdf}.modal-right[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:12px;color:#d9534f;text-align:center;font-weight:600}.modal-right[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:transparent;border:none;font-size:24px;cursor:pointer;line-height:1;color:#444}"]}),o})()},{path:"register",component:(()=>{class o{constructor(n,t,s){this.fb=n,this.authService=t,this.router=s,this.submitted=!1,this.errorMessage=""}ngOnInit(){this.registerForm=this.fb.group({name:["",i.kI.required],email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(6)]],confirmPassword:["",i.kI.required]},{validators:this.passwordMatchValidator})}passwordMatchValidator(n){const t=n.get("password")?.value,s=n.get("confirmPassword")?.value;return t!==s?n.get("confirmPassword")?.setErrors({mismatch:!0}):n.get("confirmPassword")?.setErrors(null),null}get f(){return this.registerForm.controls}onSubmit(){this.submitted=!0,this.errorMessage="",!this.registerForm.invalid&&this.authService.register(this.registerForm.value).subscribe({next:n=>{console.log("Registration successful",n),this.authService.login({email:this.registerForm.value.email,password:this.registerForm.value.password}).subscribe({next:()=>{this.router.navigate(["/dashboard"])},error:L=>{this.errorMessage=L.error?.message||"Login after registration failed"}})},error:n=>{this.errorMessage=n.error?.message||"Registration failed"}})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(i.qu),e.Y36(g.e),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:19,vars:14,consts:[[1,"modal-backdrop"],[1,"modal-container"],[1,"modal-left"],["src","assets/images/sydney-opera-house.png","alt","Opera House"],[1,"modal-right"],[3,"formGroup","ngSubmit"],["type","text","formControlName","name","placeholder","Name"],["class","error",4,"ngIf"],["type","email","formControlName","email","placeholder","Email"],["type","password","formControlName","password","placeholder","Password"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password"],["type","submit",1,"submit-btn"],["class","error-message",4,"ngIf"],[1,"error"],[4,"ngIf"],[1,"error-message"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"h2"),e._uU(6,"Sign Up"),e.qZA(),e.TgZ(7,"form",5),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e._UZ(8,"input",6),e.YNc(9,w,2,1,"div",7),e._UZ(10,"input",8),e.YNc(11,O,3,2,"div",7),e._UZ(12,"input",9),e.YNc(13,q,3,2,"div",7),e._UZ(14,"input",10),e.YNc(15,y,3,2,"div",7),e.TgZ(16,"button",11),e._uU(17,"Sign Up"),e.qZA(),e.YNc(18,J,2,1,"div",12),e.qZA()()()()),2&n&&(e.xp6(7),e.Q6J("formGroup",t.registerForm),e.xp6(1),e.ekj("invalid",t.f.name.touched&&t.f.name.invalid),e.xp6(1),e.Q6J("ngIf",t.f.name.touched&&t.f.name.invalid),e.xp6(1),e.ekj("invalid",t.f.email.touched&&t.f.email.invalid),e.xp6(1),e.Q6J("ngIf",t.f.email.touched&&t.f.email.invalid),e.xp6(1),e.ekj("invalid",t.f.password.touched&&t.f.password.invalid),e.xp6(1),e.Q6J("ngIf",t.f.password.touched&&t.f.password.invalid),e.xp6(1),e.ekj("invalid",t.f.confirmPassword.touched&&t.f.confirmPassword.invalid),e.xp6(1),e.Q6J("ngIf",t.f.confirmPassword.touched&&t.f.confirmPassword.invalid),e.xp6(3),e.Q6J("ngIf",t.errorMessage))},dependencies:[d.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(240,240,240,.7);display:flex;justify-content:center;align-items:center;z-index:1000}.modal-container[_ngcontent-%COMP%]{display:flex;width:720px;max-height:90vh;background:white;border-radius:12px;box-shadow:0 8px 24px #0003;overflow:hidden;flex-direction:row}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{flex-direction:column;width:90vw}}.modal-left[_ngcontent-%COMP%]{flex:1}.modal-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.modal-right[_ngcontent-%COMP%]{flex:1;padding:48px 32px;position:relative;overflow-y:auto}.modal-right[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:32px;font-weight:700;text-align:center}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:4px;padding:12px;border:1px solid #8c8cec;border-radius:4px;font-size:14px}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#d9534f}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d9534f;font-size:12px;margin-bottom:12px}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{margin-top:16px;background-color:#6c63ff;border:none;color:#fff;padding:14px 0;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .2s ease-in-out}.modal-right[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background-color:#594fdf}.modal-right[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:12px;color:#d9534f;text-align:center;font-weight:600}.modal-right[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:transparent;border:none;font-size:24px;cursor:pointer;line-height:1;color:#444}"]}),o})()},{path:"",redirectTo:"login",pathMatch:"full"}];let k=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.Bz.forChild(N),l.Bz]}),o})();var U=a(529);let Y=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,k,i.UX,U.JF]}),o})()}}]);